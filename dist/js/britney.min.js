"use strict";angular.module("britney",[]),angular.module("britney").factory("Flasher",["$rootScope",function(a){function b(b){_.contains(h,b.severity)||delete b.severity,b=_.extend({},j,b),b.id=_.uniqueId("notification_"),a.$broadcast(g,b)}function c(a){a=_.pick(a,"message","severity"),b(a)}function d(a){a=_.pick(a,"message","severity"),_.extend(a,i),b(a)}function e(a,b){a=_.pick(a,"message","severity","sticky"),k.push([b,a])}function f(a){for(var c,d,e;k.length>0;)c=k.pop(),d=c[0],e=c[1],d===a&&b(e)}var g="event:add-notification",h=["info","success","warning"],i={sticky:!0},j={sticky:!1,severity:"info"},k=[];return{showFlashNotification:c,showStickyNotification:d,rigRouteNotification:e,_dispatchRiggedNotifications:f}}]).run(["$rootScope","Flasher",function(a,b){a.$on("$stateChangeSuccess",function(a,c){b._dispatchRiggedNotifications(c.name)})}]),angular.module("britney").controller("FlasherCtrl",["$scope","$rootScope","$timeout",function(a,b,c){function d(b){delete a.notifications[b]}function e(a){function b(){return _.isString(a.id)&&0===a.id.indexOf("notification_")}return b()&&_.isString(a.message)&&_.isString(a.severity)&&_.isBoolean(a.sticky)}function f(b,f){var g=f.id;e(f)&&(a.notifications[g]=f,f.sticky||c(function(){d(g)},h))}function g(){a.notifications={}}var h=5e3;a.notifications={},a.removeNotification=d,b.$on("event:add-notification",f),b.$on("$stateChangeStart",g)}]);